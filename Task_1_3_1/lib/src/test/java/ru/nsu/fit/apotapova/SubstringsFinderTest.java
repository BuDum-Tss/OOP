/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package ru.nsu.fit.apotapova;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.nio.charset.StandardCharsets;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;

class SubstringsFinderTest {

  @Test
  void testBigText() {
    try (BufferedReader reader = new BufferedReader(new FileReader("src/test/resources/BigText.txt"))) {
      SubstringsFinder finder = new SubstringsFinder(reader);
      Assertions.assertEquals(10, finder.findSubstring("The Boy Who Lived"));
    } catch (IOException e) {
      throw new RuntimeException(e);
    }

  }
  @Test
  void testBigText2() {
    try (BufferedReader reader = new BufferedReader(new FileReader("src/test/resources/BigText.txt"))) {
      SubstringsFinder finder = new SubstringsFinder(reader);
      Assertions.assertNull(finder.findSubstring("This line is not in the text"));
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }

  @Test
  void testBufferOverlap() {
    try (BufferedReader reader = new BufferedReader(new FileReader("src/test/resources/BufferOverlap.txt"))) {
      SubstringsFinder finder = new SubstringsFinder(reader);
      Assertions.assertEquals(26, finder.findSubstring("---->.<----"));
    } catch (IOException e) {
      throw new RuntimeException(e);
    }

  }
  @Test
  void testUTF8() {
    try (BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream("src/test/resources/UTF8.txt"),
        StandardCharsets.UTF_8))) {
      SubstringsFinder finder = new SubstringsFinder(reader);
      Assertions.assertEquals(1, finder.findSubstring("Â©"));
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }
  @Test
  void testAAAinAAAAAAAA() {
    try (BufferedReader reader = new BufferedReader(new FileReader("src/test/resources/AAAinAAAAAAAA.txt"))) {
      SubstringsFinder finder = new SubstringsFinder(reader);
      Assertions.assertEquals(0, finder.findSubstring("AAA"));
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }
}
